<script>
function ModalEditor_Add() {
    document.getElementById("ModalEditorForm").action = "CommandProcessor.php?Action=New";
    document.getElementById("ModalEditorBackground").style.visibility = "visible";
    document.getElementById("ModalEditorCaption").innerHTML = "Добавление контракта";
    
    el = document.getElementById("ModalEditorTitle");
    el.value = "";
    el.focus();

    document.getElementById("ModalEditorSignDate").value = GetCurrentDate();
    document.getElementById("ModalEditorPreparationDate").value = GetCurrentDate();
    document.getElementById("ModalEditorContractAmount").value = 0;
    document.getElementById("ModalEditorComment").value = "";
    document.getElementById("ModalEditorAction").disabled = true;
    document.getElementById("ModalEditorAction").innerHTML = "Добавить";
}

function ModalEditor_Edit(Contract) {
    document.getElementById("ModalEditorForm").action = "CommandProcessor.php?Action=Edit";
    document.getElementById("ModalEditorBackground").style.visibility = "visible";
    document.getElementById("ModalEditorCaption").innerHTML = "Изменение контракта";

    el = document.getElementById("ModalEditorTitle");
    el.value = Contract.Title;
    el.focus();

    document.getElementById("ModalEditorSignDate").value = Contract.SignDate.split('-').reverse().join('-');
    document.getElementById("ModalEditorPreparationDate").value = Contract.PreparationDate.split('-').reverse().join('-');
    document.getElementById("ModalEditorContractAmount").value = Contract.ContractAmount;
    document.getElementById("ModalEditorComment").value = Contract.Comment;
    document.getElementById("ModalEditorAction").disabled = false;
    document.getElementById("ModalEditorAction").innerHTML = "Изменить";
    document.getElementById("ModalEditorID").value = Contract.ID;
}

function ModalEditor_Close() {
    ModalEditor = document.getElementById("ModalEditorBackground");
    ModalEditor.style.visibility = "hidden";
}

function CheckEditorActionButton(TitleText) {
    btn = document.getElementById("ModalEditorAction");
    btn.disabled = (TitleText == "");
}
</script>

<link rel="stylesheet" href="ModalEditors.css">

<style type="text/css">
    .ModalEditorItemWrapper {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-bottom: 5px;
        padding-top: 5px;
    }

    .ModalEditorItem {
        width: 350px;
        margin-left: 20px;
        font-size: 16px;
        padding: 2px 5px;
    }
</style>


<div class="ModalEditor_Background" id="ModalEditorBackground">
    <div class="ModalEditor_Frame">

        <div class="ModalEditor_CaptionWrapper">
            <H3 class="ModalEditor_Caption" id="ModalEditorCaption">Добавление контракта</H3>
        </div>
        
        <div class="ModalEditor_ContentWrapper">
            <form class="ModalEditor_Form" method="post"  id="ModalEditorForm" action="CommandProcessor.php?Action=New">

                <div class="ModalEditorItemWrapper">
                    <label>Наименование контракта</label>
                    <input class="ModalEditorItem" id="ModalEditorTitle" type="text" name="Title" oninput="CheckEditorActionButton(this.value)">
                </div>
                
                <div class="ModalEditorItemWrapper">
                    <label>Дата заключения</label>
                    <input class="ModalEditorItem" id="ModalEditorSignDate" type="date" name="SignDate">
                </div>

                <div class="ModalEditorItemWrapper">
                    <label>Дата подготовки</label>
                    <input class="ModalEditorItem" id="ModalEditorPreparationDate" type="date" name="PreparationDate">
                </div>

                <div class="ModalEditorItemWrapper">
                    <label>Сумма контракта</label>
                    <input class="ModalEditorItem" id="ModalEditorContractAmount" type="text" name="ContractAmount">
                </div>

                <div class="ModalEditorItemWrapper">
                    <label>Заметка</label>
                    <input class="ModalEditorItem" id="ModalEditorComment" type="text" name="Comment">
                </div>

                <input class="ModalEditor_Hidden" id="ModalEditorID" name="ID">

                <div class="ModalButtonToolBar">
                    <button class="ModalEditorToolBarButtonBlue" type="submit" id="ModalEditorAction">Добавить</button>
                    <button class="ModalEditorToolBarButtonRed" type="reset" onclick="ModalEditor_Close()">Отменить</button>
                </div>
       
            </form>
        </div>

    </div>
</div>